(()=>{"use strict";var e=".popup__form",t=".popup__button",n="popup__form-error",r=(document.querySelectorAll(".popup"),document.forms.formNewMesto),o=document.querySelector(".profile__edit"),c=document.querySelector(".popup-edit-profile"),a=document.querySelector(".profile__add"),l=document.querySelector(".new-item-form"),d=document.querySelector(".profile__name"),u=document.querySelector(".profile__subname"),i=document.querySelector(".elements-grid"),s=document.querySelector(".cards-temlate").content,p=document.querySelector(".img-card-big"),m=p.querySelector(".popup__image"),y=p.querySelector(".popup__caption"),f=document.querySelector("[name=nameInput]"),v=document.querySelector("[name=jobInput]"),_=r.querySelector("[name=mesto-title]"),q=r.querySelector("[name=mesto-link]"),S=c.querySelector(e),k=c.querySelector(t),g=l.querySelector(t);function L(e){e.classList.add("popup_opened"),document.addEventListener("keydown",b)}function E(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",b)}function b(e){"Escape"===e.code&&E(document.querySelector(".popup_opened"))}function h(e){var t=s.querySelector(".card").cloneNode(!0);return t.querySelector(".card__like").addEventListener("click",(function(e){e.target.classList.toggle("card__like_active")})),t.querySelector(".card__delete-icon").addEventListener("click",(function(){t.remove()})),t.querySelector(".card__title").textContent=e.name,t.querySelector(".card__image").src=e.link,t.querySelector(".card__image").alt=e.name,t.querySelector(".card__image").addEventListener("click",(function(t){m.src=e.link,m.alt=e.alt,y.textContent=e.alt,L(p)})),t}i.querySelectorAll(".card__like");var x=function(e,t){!function(e){return e.every((function(e){return e.validity.valid}))}(t)?e.disabled=!0:e.disabled=!1};function j(e){(e.target.classList.contains("popup__close")||e.target.classList.contains("popup"))&&E(e.target.closest(".popup"))}Array.from(document.querySelectorAll(e)).forEach((function(e){!function(e){e.addEventListener("submit",(function(e){e.preventDefault()}));var r=Array.from(e.querySelectorAll(".popup__form-input")),o=e.querySelector(t);x(o,r),r.forEach((function(e){e.addEventListener("input",(function(){(function(e){e.validity.valid?function(e){document.querySelector("#".concat(e.name,"-error")).textContent="",e.classList.remove(n)}(e):function(e){document.querySelector("#".concat(e.name,"-error")).textContent=e.validationMessage,e.classList.add(n)}(e)})(e),x(o,r)}))}))}(e)})),c.addEventListener("submit",(function(e){e.preventDefault(),d.textContent=f.value,u.textContent=v.value,S.reset(),E(c)})),l.addEventListener("submit",(function(e){e.preventDefault();var t,n=_.value,o=q.value;t=h({name:n,link:o,alt:n}),i.prepend(t),E(l),r.reset()})),o.addEventListener("click",(function(){L(c),k.disabled=!0})),a.addEventListener("click",(function(){L(l),g.disabled=!0})),c.addEventListener("click",j),l.addEventListener("click",j),p.addEventListener("click",j),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg",alt:"Архыз"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg",alt:"Челябинская область"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg",alt:"Иваново"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg",alt:"Камчатка"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg",alt:"Холмогорский район"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg",alt:"Байкал"}].forEach((function(e){var t=h(e);i.prepend(t)}))})();